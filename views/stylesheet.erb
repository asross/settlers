<style type="text/css">
  <% height = 100.0 %>
  <% width = height/Math.sqrt(3) %>
  <% margin = 5 + height/4.0 %>
  <% road_height = 10 %>
  <% city_height = 25 %>
  <% port_height = 20 %>
  <% city_city_height = city_height + 10 %>
  body {
    margin: 0;
  }
  #last-roll {
    margin: 0.5em;
    font-size: 2em;
    float: left;
    width: <%= width %>px;
    height: <%= width %>px;
    line-height: <%= width %>px;
    background-color: #ccc;
    text-align: center;
  }
  .tile {
    position: relative;
    width: <%= width %>px;
    height: <%= height %>px;
    margin-left: <%= margin %>px;
  }
  .road-marker, .road {
    position: relative;
    top: <%= -road_height/2.0 %>px;
    height: <%= road_height %>px;
    width: <%= width - road_height %>px;
    margin: 0 auto;
    z-index: 2;
  }
  .road-marker.botleft, .road.botleft {
    top: <%= height - road_height/2.0 %>px;
  }
  .city-marker, .city, .settlement {
    float: left;
    z-index: 3;
    position: relative;
    top: <%= -city_height/2 %>px;
    left: <%= -city_height/2 %>px;
    width: <%= city_height %>px;
    height: <%= city_height %>px;
    border-radius: <%= city_height %>px;
  }
  .city {
    width: <%= city_city_height %>px;
    height: <%= city_city_height %>px;
    top: <%= -city_city_height/2 %>px;
    left: <%= -city_city_height/2 %>px;
  }
  .city-marker, .road-marker {
    display: none;
    cursor: pointer;
  }
  body.city-select .city-marker {
    display: block;
  }
  body.city-select .settlement:hover {
    cursor: pointer;
  }
  body.road-select .road-marker {
    display: block;
  }
  body.hex-select .hex:hover .tile {
    cursor: pointer;
    background-color: #ccc;
  }
  body.player-select .player:not(.active) .name {
    text-decoration: underline;
    color: #2518b5;
    cursor: pointer;
  }
  <% %w(trade year-of-plenty monopoly).each do |action| %>
    #<%= action %>-widget {
      margin-top: 1em;
      display: none;
    }
    body.<%= action %>-select #<%= action %>-widget {
      display: block;
    }
  <% end %>
  .hex.hover .tile {
    background-color: #ccc;
  }
  .tile.water {
    background-color: cornflowerblue;
  }
  .tile.wheat {
    background-color: goldenrod;
  }
  .tile.sheep {
    background-color: yellowgreen;
  }
  .tile.wood {
    background-color: darkgreen;
  }
  .tile.ore {
    background-color: dimgray;
  }
  .tile.brick {
    background-color: firebrick;
  }
  .tile.desert {
    background-color: moccasin;
  }
  .tile.first {
    -webkit-transform: rotateZ(60deg);
    -moz-transform: rotateZ(60deg);
  }
  .tile.second {
    -webkit-transform: rotateZ(-60deg);
    -moz-transform: rotateZ(-60deg);
    top: <%= -1*height %>px;
  }
  .tile.third {
    top: <%= -2*height %>px;
  }
  .number {
    width: <%= height/2.0 %>px;
    height: <%= height/2.0 %>px;
    line-height: <%= height %>px;
    font-size: 2em;
    position: relative;
    text-align: center;
    vertical-align: middle;
    top: <%= -3*height %>px;
    color: white;
    left: <%= height/3.0 %>px;
    background-color: transparent;
  }
  .port {
    position: relative;
    top: <%= -2.5*height - port_height/2.0 %>px;
    left: <%= width/2.0 %>px;
    width: <%= width %>px;
    height: <%= port_height %>px;
  }
  .port .label {
    color: white;
    background-color: #ccc;
    text-align: center;
    position: relative;
    top: <%= - height/2.0 + port_height %>px;
  }
  <% %w(top topright botright bottom botleft topleft).each_with_index do |direction, i| %>
    .port.<%= direction %> {
      -webkit-transform: rotateZ(<%= i*60 %>deg);
      -moz-transform: rotateZ(<%= i*60 %>deg);
    }
    <% if direction.start_with?('bot') %>
      .port.<%= direction %> .label {
        -webkit-transform: scaleX(-1) scaleY(-1);
        -moz-transform: scaleX(-1) scaleY(-1);
      }
    <% end %>
  <% end %>
  .robbed {
    color: black;
  }
  .hex {
    height: 0px;
  }
  #chat {
    position: absolute;
    top: <%= @game.board.size*height %>px;
    width: <%= 2*margin + (@game.board.size + @game.board.side_length)*width %>px;
    height: 200px;
    border-top: 1px solid #ccc;
  }
  #chat #error-area {
    height: 3em;
    background-color: #f8f8f8;
  }
  #chat #error-area #error {
    line-height: 3em;
    padding-left: 1em;
    color: darkred;
  }
  #chat #message-area {
    border-top: 1px solid #ccc;
    height: 100px;
    background-color: #eee;
    padding: 1em;
    overflow: scroll;
  }
  #chat #message-area ul {
    margin: 0;
    padding: 0;
    list-style: none;
  }
  #chat form input {
    padding: 1em;
    width: <%= 2*margin + (@game.board.size + @game.board.side_length)*width + 300 %>px;
  }
  #players {
    position: absolute;
    left: <%= 2*margin + (@game.board.size + @game.board.side_length)*width %>px;
    top: 0;
    height: <%= 183 + @game.board.size*height %>px;
    border-left: 1px solid #ccc;
    border-right: 1px solid #ccc;
    width: 300px;
    background-color: #e8e8e8;
  }
  #players .player {
    width: 100%;
    border-top: 1px solid #ccc;
    padding: 1em 0;
  }
  #players .player span {
    padding: 0 1em;
  }
  #players .player ul {
    list-style: none;
  }
  #players .player .buttons {
    padding: 0 2em;
  }
  button:hover:enabled {
    cursor: pointer;
  }
  #players .player.active .name {
    font-weight: bold;
  }
  #players .player.active .name:before {
    content: '*';
  }
  #players .player .info {
    display: none;
  }
  #players .player[data-color='<%= @current_player.color %>'] .info {
    display: block;
  }
  <% @game.board.hexes.flatten.each do |hex| %>
    .hex[data-coords=<%= "\"#{[hex.x, hex.y]}\""%>] {
      position: absolute;
      top: <%= hex.y*height + (hex.x-@game.board.side_length)*(height/2.0) %>px;
      left: <%= hex.x*height*Math.sqrt(3)/2.0 %>px;
    }
  <% end %>
  <% @game.players.each_with_index do |player| %>
    [data-color='<%= player.color %>'] {
      background-color: <%= player.color %>;
    }
  <% end %>
</style>
